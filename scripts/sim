#/usr/bin/env bash

set -e

# ensure the tool is built
if [ ! -f s2n-quic-sim/target/release/s2n-quic-sim ]; then
  cargo build --manifest-path s2n-quic-sim/Cargo.toml --release
fi

if [ ! "$@" ]; then
  ./s2n-quic-sim/target/release/s2n-quic-sim batch s2n-quic-sim/plans/*.toml
else
  ./s2n-quic-sim/target/release/s2n-quic-sim $@
fi
